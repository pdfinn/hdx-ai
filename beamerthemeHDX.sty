% beamerthemeHDX.sty
% Main theme file for Happy Digital X (HDX) Beamer presentations
%
% Based on official HDX PowerPoint template for Faculty
% Requires: XeLaTeX or LuaLaTeX (for fontspec)
%
% Usage:
%   \documentclass[aspectratio=169]{beamer}
%   \usetheme{HDX}
%
% Optional: Install Poppins font from Google Fonts for exact match
% https://fonts.google.com/specimen/Poppins
%
% Author: Generated from HDX PPT Template
% License: For use in HDX/Tsinghua presentations

\mode<presentation>

\ProvidesPackage{beamerthemeHDX}[2024/01/01 HDX Beamer Theme]

%% ============================================================================
%% REQUIRED PACKAGES
%% ============================================================================

\RequirePackage{tikz}
\RequirePackage{graphicx}
\RequirePackage{fontspec}
\RequirePackage{xcolor}

%% ============================================================================
%% THEME OPTIONS
%% ============================================================================

% Option to show/hide section pages
\newif\ifhdx@showsectionpages
\hdx@showsectionpagestrue

\DeclareOption{nosectionpages}{\hdx@showsectionpagesfalse}
\DeclareOption*{\PackageWarning{beamerthemeHDX}{Unknown option '\CurrentOption'}}
\ProcessOptions\relax

%% ============================================================================
%% LOAD SUB-THEMES
%% ============================================================================

\usecolortheme{HDX}
\usefonttheme{HDX}
\useinnertheme{HDX}
\useoutertheme{HDX}

%% ============================================================================
%% ASPECT RATIO
%% ============================================================================

% The template is designed for 16:9 aspect ratio
% Usage: \documentclass[aspectratio=169]{beamer}

%% ============================================================================
%% ADDITIONAL COMMANDS
%% ============================================================================

% Section page control
\ifhdx@showsectionpages
    % Section pages are enabled by default in inner theme
\else
    % Disable automatic section pages
    \AtBeginSection[]{}
\fi

% Convenience command for two-column layout
\newcommand{\hdxtwocolumn}[2]{%
    \begin{columns}[T]
        \begin{column}{0.48\textwidth}
            #1
        \end{column}
        \begin{column}{0.48\textwidth}
            #2
        \end{column}
    \end{columns}
}

% Purple box for highlighting (inline)
\newcommand{\hdxhighlight}[1]{%
    \tikz[baseline=(text.base)]{%
        \node[fill=hdxpurple, text=white, inner sep=2pt, rounded corners=2pt] (text) {#1};%
    }%
}

% Thank you slide command
\newcommand{\hdxthankyou}[4]{%
    % #1 = website, #2 = email, #3 = social, #4 = phone
    \begin{frame}[plain]
        \begin{tikzpicture}[remember picture, overlay]
            \fill[hdxbg] (current page.south west) rectangle (current page.north east);
        \end{tikzpicture}
        \vspace{10mm}
        \begin{columns}[c]
            \begin{column}{0.45\textwidth}
                \begin{center}
                    {\color{hdxpurple}\fontsize{60}{70}\selectfont\bfseries Thank\\You}
                \end{center}
            \end{column}
            \begin{column}{0.45\textwidth}
                \begin{tikzpicture}
                    % Contact info box with gradient-ish effect
                    \node[
                        fill=hdxbg!80!hdxpurple,
                        rounded corners=5pt,
                        minimum width=60mm,
                        minimum height=40mm,
                        anchor=center
                    ] (infobox) at (0,0) {};

                    % Contact details
                    \node[anchor=west, font=\small] at ([xshift=5mm, yshift=12mm]infobox.west) {%
                        \includegraphics[height=4mm]{assets/hdx-logo-full.png}%
                    };
                    \node[anchor=west, font=\small\color{hdxpurple}] at ([xshift=5mm, yshift=4mm]infobox.west) {#1};
                    \node[anchor=west, font=\small\color{hdxpurple}] at ([xshift=5mm, yshift=-4mm]infobox.west) {#2};
                    \node[anchor=west, font=\small\color{hdxpurple}] at ([xshift=5mm, yshift=-12mm]infobox.west) {#3};
                \end{tikzpicture}

                \vspace{5mm}

                % Email box
                \begin{tikzpicture}
                    \node[
                        fill=hdxpurple,
                        rounded corners=3pt,
                        minimum width=60mm,
                        minimum height=10mm,
                        text=white,
                        font=\small
                    ] {#4};
                \end{tikzpicture}
            \end{column}
        \end{columns}
    \end{frame}
}

\mode<all>
